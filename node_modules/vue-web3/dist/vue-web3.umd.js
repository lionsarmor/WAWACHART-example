!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(0,function(){module.exports=function(t,n){var e=n.web3,r=[];function o(t,n,e){var r=e.method,o=e.contract,i=e.args;return new Promise(function(e,c){var u;return o.methods[r].apply(o.methods,i).call().then(function(o){try{return t[n]=u=o,t.$emit("CALL_SYNCED",{key:n,method:r,args:i,value:u}),e()}catch(t){return c(t)}},c)})}e.eth.subscribe("newBlockHeaders",function(t){return t&&console.error(t)}).on("data",function(t){return new Promise(function(i,c){var u,s,a,f;return t.number?new Promise(function(t){return setTimeout(t,n.delay||12e3)}).then(function(n){try{return e.eth.getBlock(t.number,!0).then(function(t){try{return u=t,s=r.map(function(t){return t.contract.options.address}),a=u.transactions.filter(function(t){return s.includes(t.to)}),f=a.map(function(t){return t.to}),r.filter(function(t){return f.includes(t.contract.options.address)}).forEach(function(t){return o(t.vm,t.key,t)}),i()}catch(t){return c(t)}},c)}catch(t){return c(t)}},c):i()})}),t.prototype.$bindCall=function(t,n){var e=n.method,i=n.contract,c=n.args;return new Promise(function(n,u){return r.push({vm:this,key:t,method:e,contract:i,args:c}),o(this,t,{method:e,contract:i,args:c}).then(function(t){try{return n()}catch(t){return u(t)}},u)}.bind(this))},t.prototype.$bindEvents=function(t,n){var e=n.event,r=n.contract,o=n.options;return new Promise(function(n,i){var c;return o=Object.assign({},{fromBlock:0,toBlock:"latest"},o),r.getPastEvents(e,o).then(function(u){var s=this;try{return this[t]=c=u,this.$emit("EVENTS_SYNCED",c),o.fromBlock=c[c.length-1].blockNumber+1,r.events[e](o,function(n,e){if(n)throw n;s[t].push(e),s.$emit("EVENT_SYNCED",e)}),n()}catch(t){return i(t)}}.bind(this),i)}.bind(this))},t.mixin({created:function(){var t=this,n=this.$options.web3;"function"==typeof n&&(n=n.call(this)),n&&Object.keys(n).forEach(function(e){n[e].method&&t.$bindCall(e,n[e]),n[e].event&&t.$bindEvents(e,n[e])})}})}});
//# sourceMappingURL=vue-web3.umd.js.map
