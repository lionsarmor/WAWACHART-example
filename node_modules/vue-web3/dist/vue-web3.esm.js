module.exports=function(t,n){var r=n.web3,e=[];function o(t,n,r){var e=r.method,o=r.contract,c=r.args;return new Promise(function(r,i){var u;return o.methods[e].apply(o.methods,c).call().then(function(o){try{return t[n]=u=o,t.$emit("CALL_SYNCED",{key:n,method:e,args:c,value:u}),r()}catch(t){return i(t)}},i)})}r.eth.subscribe("newBlockHeaders",function(t){return t&&console.error(t)}).on("data",function(t){return new Promise(function(c,i){var u,s,a,h;return t.number?new Promise(function(t){return setTimeout(t,n.delay||12e3)}).then(function(n){try{return r.eth.getBlock(t.number,!0).then(function(t){try{return u=t,s=e.map(function(t){return t.contract.options.address}),a=u.transactions.filter(function(t){return s.includes(t.to)}),h=a.map(function(t){return t.to}),e.filter(function(t){return h.includes(t.contract.options.address)}).forEach(function(t){return o(t.vm,t.key,t)}),c()}catch(t){return i(t)}},i)}catch(t){return i(t)}},i):c()})}),t.prototype.$bindCall=function(t,n){var r=n.method,c=n.contract,i=n.args;return new Promise(function(n,u){return e.push({vm:this,key:t,method:r,contract:c,args:i}),o(this,t,{method:r,contract:c,args:i}).then(function(t){try{return n()}catch(t){return u(t)}},u)}.bind(this))},t.prototype.$bindEvents=function(t,n){var r=n.event,e=n.contract,o=n.options;return new Promise(function(n,c){var i;return o=Object.assign({},{fromBlock:0,toBlock:"latest"},o),e.getPastEvents(r,o).then(function(u){var s=this;try{return this[t]=i=u,this.$emit("EVENTS_SYNCED",i),o.fromBlock=i[i.length-1].blockNumber+1,e.events[r](o,function(n,r){if(n)throw n;s[t].push(r),s.$emit("EVENT_SYNCED",r)}),n()}catch(t){return c(t)}}.bind(this),c)}.bind(this))},t.mixin({created:function(){var t=this,n=this.$options.web3;"function"==typeof n&&(n=n.call(this)),n&&Object.keys(n).forEach(function(r){n[r].method&&t.$bindCall(r,n[r]),n[r].event&&t.$bindEvents(r,n[r])})}})};
//# sourceMappingURL=vue-web3.esm.js.map
