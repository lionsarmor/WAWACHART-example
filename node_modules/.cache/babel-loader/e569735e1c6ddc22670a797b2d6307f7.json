{"remainingRequest":"/home/roddy/Desktop/WEB-APPS/realtimecharts-client/node_modules/thread-loader/dist/cjs.js!/home/roddy/Desktop/WEB-APPS/realtimecharts-client/node_modules/babel-loader/lib/index.js!/home/roddy/Desktop/WEB-APPS/realtimecharts-client/node_modules/eslint-loader/index.js??ref--13-0!/home/roddy/Desktop/WEB-APPS/realtimecharts-client/src/services/bitmex.js","dependencies":[{"path":"/home/roddy/Desktop/WEB-APPS/realtimecharts-client/src/services/bitmex.js","mtime":1602350289715},{"path":"/home/roddy/Desktop/WEB-APPS/realtimecharts-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/roddy/Desktop/WEB-APPS/realtimecharts-client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/roddy/Desktop/WEB-APPS/realtimecharts-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/roddy/Desktop/WEB-APPS/realtimecharts-client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/roddy/Desktop/WEB-APPS/realtimecharts-client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/roddy/Desktop/WEB-APPS/realtimecharts-client/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/roddy/Desktop/WEB-APPS/realtimecharts-client/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport store from '@/store';\nimport { VUEX_APPEND_NEW_OHLC } from \"../store/constants/bitmex\";\nimport axios from 'axios';\nvar url = '/api/bitmex';\nvar side = {\n  \"buy\": 1,\n  \"sell\": 0\n};\n\nvar Bitmex =\n/*#__PURE__*/\nfunction () {\n  function Bitmex() {\n    _classCallCheck(this, Bitmex);\n  }\n\n  _createClass(Bitmex, null, [{\n    key: \"getHistorical\",\n    value: function getHistorical() {\n      return new Promise(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee(resolve, reject) {\n          var res, data;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return axios.get(\"\".concat(url, \"/ohlc\"));\n\n                case 3:\n                  res = _context.sent;\n                  data = res.data;\n\n                  if (data.error) {\n                    reject(data.error);\n                  }\n\n                  resolve(data);\n                  _context.next = 12;\n                  break;\n\n                case 9:\n                  _context.prev = 9;\n                  _context.t0 = _context[\"catch\"](0);\n                  reject(_context.t0);\n\n                case 12:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[0, 9]]);\n        }));\n\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      var socket = new WebSocket('wss://www.bitmex.com/realtime?subscribe=trade:XBTUSD,liquidation:XBTUSD');\n\n      try {\n        socket.onmessage = function (event) {\n          var data = JSON.parse(event.data);\n\n          if (data.data != undefined && data.data[0] != undefined) {\n            store.dispatch(VUEX_APPEND_NEW_OHLC, data.data[0]);\n          }\n        };\n      } catch (err) {}\n    }\n  }]);\n\n  return Bitmex;\n}();\n\nexport default Bitmex;",{"version":3,"sources":["/home/roddy/Desktop/WEB-APPS/realtimecharts-client/src/services/bitmex.js"],"names":["store","VUEX_APPEND_NEW_OHLC","axios","url","side","Bitmex","Promise","resolve","reject","get","res","data","error","socket","WebSocket","onmessage","event","JSON","parse","undefined","dispatch","err"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,SAAlB;AACA,SAASC,oBAAT;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAMC,GAAG,GAAG,aAAZ;AAEA,IAAMC,IAAI,GAAG;AAAC,SAAO,CAAR;AAAW,UAAQ;AAAnB,CAAb;;IAEMC,M;;;;;;;;;oCAEqB;AACnB,aAAO,IAAIC,OAAJ;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAY,iBAAMC,OAAN,EAAeC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAEON,KAAK,CAACO,GAAN,WAAaN,GAAb,WAFP;;AAAA;AAELO,kBAAAA,GAFK;AAGLC,kBAAAA,IAHK,GAGED,GAAG,CAACC,IAHN;;AAIX,sBAAIA,IAAI,CAACC,KAAT,EAAgB;AACZJ,oBAAAA,MAAM,CAACG,IAAI,CAACC,KAAN,CAAN;AACH;;AACDL,kBAAAA,OAAO,CAACI,IAAD,CAAP;AAPW;AAAA;;AAAA;AAAA;AAAA;AASXH,kBAAAA,MAAM,aAAN;;AATW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAZ;;AAAA;AAAA;AAAA;AAAA,UAAP;AAYH;;;8BAEgB;AACb,UAAMK,MAAM,GAAG,IAAIC,SAAJ,CAAc,yEAAd,CAAf;;AACA,UAAG;AACHD,QAAAA,MAAM,CAACE,SAAP,GAAmB,UAACC,KAAD,EAAW;AAC1B,cAAIL,IAAI,GAAGM,IAAI,CAACC,KAAL,CAAWF,KAAK,CAACL,IAAjB,CAAX;;AACA,cAAIA,IAAI,CAACA,IAAL,IAAaQ,SAAb,IAA0BR,IAAI,CAACA,IAAL,CAAU,CAAV,KAAgBQ,SAA9C,EAAyD;AACrDnB,YAAAA,KAAK,CAACoB,QAAN,CAAenB,oBAAf,EAAqCU,IAAI,CAACA,IAAL,CAAU,CAAV,CAArC;AACH;AACJ,SALD;AAMC,OAPD,CAOE,OAAMU,GAAN,EAAW,CAAE;AAClB;;;;;;AAIL,eAAehB,MAAf","sourcesContent":["import store from '@/store'\nimport { VUEX_APPEND_NEW_OHLC } from '../store/constants/bitmex'\nimport axios from 'axios';\n\nconst url = '/api/bitmex'\n\nconst side = {\"buy\": 1, \"sell\": 0}\n\nclass Bitmex {\n    \n    static getHistorical() {\n        return new Promise(async(resolve, reject)=>{\n            try {\n                const res = await axios.get(`${url}/ohlc`)\n                const data = res.data\n                if (data.error) {\n                    reject(data.error)\n                }\n                resolve(data)\n            } catch (err) {\n                reject(err)\n            }\n        })\n    }\n\n    static connect() {\n        const socket = new WebSocket('wss://www.bitmex.com/realtime?subscribe=trade:XBTUSD,liquidation:XBTUSD')\n        try{ \n        socket.onmessage = (event) => {\n            let data = JSON.parse(event.data)\n            if (data.data != undefined && data.data[0] != undefined) {\n                store.dispatch(VUEX_APPEND_NEW_OHLC, data.data[0]) \n            }\n        }\n        } catch(err) {}\n    }\n    \n}\n\nexport default Bitmex"]}]}